(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(2),s=n.n(c),r=n(7),i=n.n(r),o=(n(13),n(1)),j=n(4),l=n.n(j),u=n(5),b=n(3),d=(n(15),n(16),""),O=(n(17),function(e){var t=e.isLoading,n=void 0!==t&&t,c=e.isDisabled,s=void 0!==c&&c,r=e.onClick,i=e.children,j=e.style,l=void 0===j?{}:j;return Object(a.jsx)("div",{children:Object(a.jsx)("div",{style:l,className:"main_block",children:n?Object(a.jsxs)("div",{className:"loader",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]}):Object(a.jsx)("input",Object(o.a)({},{onClick:function(){r&&r()},className:"button",type:"submit",value:i&&"string"===typeof i?i:"Submit",disabled:s}))})})});function h(e){var t=e.changeView,n=s.a.useState(""),c=Object(b.a)(n,2),r=c[0],i=c[1],j=s.a.useState(""),h=Object(b.a)(j,2),f=h[0],x=h[1],p=s.a.useState(!0),v=Object(b.a)(p,2),g=v[0],m=v[1],S=s.a.useState(""),y=Object(b.a)(S,2),C=y[0],k=y[1],w=s.a.useState(!1),N=Object(b.a)(w,2),L=N[0],_=N[1],T=function(){var e=Object(u.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,fetch("".concat(d,"/auth/").concat(g?"login":"register"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:r,password:f})});case 3:return n=e.sent,e.next=6,n.json();case 6:(a=e.sent).is_success?(x(""),i(""),m(a.is_success),C.length>0&&k(""),g&&(localStorage.username=r,localStorage.isUserLogin="true",t())):(k(a.message),_(!1));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e){m(e),x(""),i(""),C.length>0&&k("")};return Object(a.jsxs)("div",{children:[g?Object(a.jsx)("h2",{children:"Log in"}):Object(a.jsx)("h2",{children:"Register a new user"}),Object(a.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),T()},children:[Object(a.jsxs)("div",{className:"item",children:[Object(a.jsx)("label",{children:"Username:"}),Object(a.jsx)("input",Object(o.a)({},{type:"text",value:r,onChange:function(e){i(e.target.value)},disabled:L}))]}),Object(a.jsxs)("div",{className:"item",children:[Object(a.jsx)("label",{children:"Password:"}),Object(a.jsx)("input",Object(o.a)({},{type:"password",value:f,onChange:function(e){x(e.target.value)},disabled:L}))]}),Object(a.jsx)(O,Object(o.a)({},{isLoading:L,isDisabled:!(r.length>0&&f.length>0),style:{marginTop:"4vh"}}))]}),Object(a.jsx)("div",{className:"error-block",children:C}),Object(a.jsx)("div",{className:"link-block",children:g?Object(a.jsx)("a",{href:"#",onClick:function(){P(!1)},children:"Create account"}):Object(a.jsx)("a",{href:"#",onClick:function(){P(!0)},children:"I already have account"})})]})}n(18),n(19);var f=function(e){var t=e.body,n=e.title,c=e.id,r=e.created,i=e.username,j=s.a.useState(t),h=Object(b.a)(j,2),f=h[0],x=h[1],p=s.a.useState(n),v=Object(b.a)(p,2),g=v[0],m=v[1],S=s.a.useState(t),y=Object(b.a)(S,2),C=y[0],k=y[1],w=s.a.useState(n),N=Object(b.a)(w,2),L=N[0],_=N[1],T=s.a.useState(!0),P=Object(b.a)(T,2),D=P[0],I=P[1],U=s.a.useState(!1),J=Object(b.a)(U,2),A=J[0],F=J[1],B=s.a.useState(!1),E=Object(b.a)(B,2),V=E[0],H=E[1],M=s.a.useState(""),R=Object(b.a)(M,2),Y=R[0],q=R[1],z=localStorage.username===i;if(A)return Object(a.jsx)("div",{},c);var G=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.next=3,fetch("".concat(d,"/blog/").concat(c,"/delete"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).is_success?F(!0):q(n.message),H(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.next=3,fetch("".concat(d,"/blog/").concat(c,"/update"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({title:g,body:f})});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).is_success?(x(C),m(L),I(!D)):q(n.message),H(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"post",children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",Object(o.a)(Object(o.a)({},{className:"title_area"}),{},{children:[Object(a.jsxs)("span",{children:[" Autor: ",i," "]}),Object(a.jsxs)("span",{children:[" Date: ",r," "]})]})),Object(a.jsxs)("div",{className:"post_header",children:[Object(a.jsx)("div",{children:Object(a.jsx)("input",Object(o.a)({},{type:"text",value:L,readOnly:D,disabled:V,onChange:function(e){_(e.target.value)}}))}),z&&(D?Object(a.jsxs)("span",{className:"buttons_block",children:[Object(a.jsx)(O,Object(o.a)(Object(o.a)({},{isLoading:!1,onClick:function(){I(!D)}}),{},{children:" Edit "})),0===Y.length?Object(a.jsx)(O,Object(o.a)(Object(o.a)({},{isLoading:V,onClick:function(){G()}}),{},{children:" Delete "})):Object(a.jsx)(O,Object(o.a)(Object(o.a)({},{isLoading:!1,onClick:function(){q("")}}),{},{children:"Hide error"}))]}):Object(a.jsxs)("span",{className:"buttons_block",children:[Object(a.jsx)(O,Object(o.a)(Object(o.a)({},{onClick:K,isLoading:V}),{},{children:" Save "})),Object(a.jsx)(O,Object(o.a)(Object(o.a)({},{isLoading:!1,onClick:function(){q(""),_(g),k(f),I(!D)}}),{},{children:" Cancel "}))]}))]}),Object(a.jsx)("div",{style:{color:"red"},children:Y})]}),Object(a.jsx)("div",{children:Object(a.jsx)("textarea",Object(o.a)({},{rows:5,cols:70,readOnly:D,value:C,disabled:V,onChange:function(e){k(e.target.value)}}))})]},c)},x=(n(20),function(e){var t=e.addNewPost,n=s.a.useState(!1),c=Object(b.a)(n,2),r=c[0],i=c[1],j=s.a.useState(""),h=Object(b.a)(j,2),f=h[0],x=h[1],p=s.a.useState(""),v=Object(b.a)(p,2),g=v[0],m=v[1],S=s.a.useState(""),y=Object(b.a)(S,2),C=y[0],k=y[1],w=s.a.useState(!1),N=Object(b.a)(w,2),L=N[0],_=N[1],T=function(){var e=Object(u.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,fetch("".concat(d,"/blog/create"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({title:f,body:g})});case 3:return n=e.sent,e.next=6,n.json();case 6:(a=e.sent).is_success?(x(""),m(""),i(!r),t(a.message[0])):k(a.message),_(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"new_post",children:[r?Object(a.jsxs)("div",{className:"post_header_new_post",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:" Title: "}),Object(a.jsx)("input",Object(o.a)({},{type:"text",disabled:L,value:f,onChange:function(e){x(e.target.value)}}))]}),Object(a.jsxs)("div",{className:"buttons_block_new_post",children:[Object(a.jsx)(O,Object(o.a)(Object(o.a)({},{onClick:T,isLoading:L}),{},{children:"Save"})),Object(a.jsx)(O,Object(o.a)(Object(o.a)({},{isLoading:!1,onClick:function(){x(""),m(""),k(""),i(!r)}}),{},{children:"Cancel"}))]})]}):Object(a.jsx)("button",Object(o.a)(Object(o.a)({},{onClick:function(){i(!r)}}),{},{children:"Create new post"})),Object(a.jsxs)("div",{style:{color:"red"},children:[" ",C," "]}),r&&Object(a.jsx)("div",{children:Object(a.jsx)("textarea",Object(o.a)({},{rows:5,cols:70,value:g,disabled:L,onChange:function(e){m(e.target.value)}}))})]})});function p(){var e=s.a.useState([]),t=Object(b.a)(e,2),n=t[0],c=t[1];s.a.useEffect((function(){r()}),[]);var r=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/blog/posts"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"content_area",children:[Object(a.jsx)(x,Object(o.a)({},{addNewPost:function(e){c([]),c([e].concat(n))}})),Object(a.jsx)("div",{children:n.map((function(e){return Object(a.jsx)(f,Object(o.a)({},e))}))})]})}var v=function(){localStorage.isUserLogin||(localStorage.setItem("isUserLogin","false"),localStorage.setItem("username",""));var e=s.a.useState("false"===localStorage.isUserLogin),t=Object(b.a)(e,2),n=t[0],c=t[1],r=s.a.useState(!1),i=Object(b.a)(r,2),j=i[0],f=i[1],x=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,fetch("".concat(d,"/auth/logout"));case 3:e.sent,c(!n),localStorage.isUserLogin="false",localStorage.setItem("username",""),f(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsxs)("p",{children:[" Your name: ",localStorage.username," "]}),n||Object(a.jsx)(O,Object(o.a)(Object(o.a)({},{isLoading:j,onClick:x,style:{marginBottom:"10px"}}),{},{children:"Log out"}))]}),Object(a.jsx)("div",{className:"App-content",children:n?Object(a.jsx)(h,Object(o.a)({},{changeView:function(){c(!n)}})):Object(a.jsx)(p,{})})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root")),g()}],[[21,1,2]]]);
//# sourceMappingURL=main.cf6599f1.chunk.js.map